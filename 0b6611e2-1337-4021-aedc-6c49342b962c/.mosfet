{
  "engineId": "3b3e4a3b-d382-4e98-9950-9b4e8b308c1c",
  "rdbmsId": "0b6611e2-1337-4021-aedc-6c49342b962c",
  "insightName": "Affinity Network Graph",
  "layout": "Grid",
  "hidden": false,
  "recipe": [
    "AddPanel ( 0 ) ;",
    "Panel ( 0 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"STANDARD\" , \"opacity\" : 100 } } ] ) ;",
    "Panel ( 0 ) | AddPanelEvents ( { \"onSingleClick\" : { \"Unfilter\" : [ { \"panel\" : \"\" , \"query\" : \"\u003cencode\u003e(\u003cFrame\u003e | UnfilterFrame(\u003cSelectedColumn\u003e));\u003c/encode\u003e\" , \"options\" : { } , \"refresh\" : false , \"default\" : true , \"disabledVisuals\" : [ \"Grid\" , \"Sunburst\" ] , \"disabled\" : false } ] } , \"onBrush\" : { \"Filter\" : [ { \"panel\" : \"\" , \"query\" : \"\u003cencode\u003eif((IsEmpty(\u003cSelectedValues\u003e)),(\u003cFrame\u003e | UnfilterFrame(\u003cSelectedColumn\u003e)), (\u003cFrame\u003e | SetFrameFilter(\u003cSelectedColumn\u003e\u003d\u003d\u003cSelectedValues\u003e)));\u003c/encode\u003e\" , \"options\" : { } , \"refresh\" : false , \"default\" : true , \"disabled\" : false } ] } } ) ;",
    "Panel ( 0 ) | RetrievePanelEvents ( ) ;",
    "Panel ( 0 ) | SetPanelView ( \"visualization\" , \"\u003cencode\u003e{\"type\":\"echarts\"}\u003c/encode\u003e\" ) ;",
    "Panel ( 0 ) | SetPanelView ( \"pipeline\" , \"\u003cencode\u003e{\"app_id\":\"3b3e4a3b-d382-4e98-9950-9b4e8b308c1c\"}\u003c/encode\u003e\" ) ;",
    "AddPanel ( 0 ) ;\r\nPanel ( 0 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"STANDARD\" , \"opacity\" : 100 } } ] ) ;\r\nPanel ( 0 ) | AddPanelEvents ( { \"onSingleClick\" : { \"Unfilter\" : [ { \"panel\" : \"\" , \"query\" : \"\u003cencode\u003e(\u003cFrame\u003e | UnfilterFrame(\u003cSelectedColumn\u003e));\u003c/encode\u003e\" , \"options\" : { } , \"refresh\" : false , \"default\" : true , \"disabledVisuals\" : [ \"Grid\" , \"Sunburst\" ] , \"disabled\" : false } ] } , \"onBrush\" : { \"Filter\" : [ { \"panel\" : \"\" , \"query\" : \"\u003cencode\u003eif((IsEmpty(\u003cSelectedValues\u003e)),(\u003cFrame\u003e | UnfilterFrame(\u003cSelectedColumn\u003e)), (\u003cFrame\u003e | SetFrameFilter(\u003cSelectedColumn\u003e\u003d\u003d\u003cSelectedValues\u003e)));\u003c/encode\u003e\" , \"options\" : { } , \"refresh\" : false , \"default\" : true , \"disabled\" : false } ] } } ) ;\r\nPanel ( 0 ) | RetrievePanelEvents ( ) ;\r\nPanel ( 0 ) | SetPanelView ( \"visualization\" , \"\u003cencode\u003e{\"type\":\"echarts\"}\u003c/encode\u003e\" ) ;\r\nPanel ( 0 ) | SetPanelView ( \"pipeline\" , \"\u003cencode\u003e{\"app_id\":\"3b3e4a3b-d382-4e98-9950-9b4e8b308c1c\"}\u003c/encode\u003e\" ) ;\r\nAddPanel ( 0 ) ;\r\nPanel ( 0 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"STANDARD\" , \"opacity\" : 100 } } ] ) ;\r\nPanel ( 0 ) | AddPanelEvents ( { \"onSingleClick\" : { \"Unfilter\" : [ { \"panel\" : \"\" , \"query\" : \"\u003cencode\u003e(\u003cFrame\u003e | UnfilterFrame(\u003cSelectedColumn\u003e));\u003c/encode\u003e\" , \"options\" : { } , \"refresh\" : false , \"default\" : true , \"disabledVisuals\" : [ \"Grid\" , \"Sunburst\" ] , \"disabled\" : false } ] } , \"onBrush\" : { \"Filter\" : [ { \"panel\" : \"\" , \"query\" : \"\u003cencode\u003eif((IsEmpty(\u003cSelectedValues\u003e)),(\u003cFrame\u003e | UnfilterFrame(\u003cSelectedColumn\u003e)), (\u003cFrame\u003e | SetFrameFilter(\u003cSelectedColumn\u003e\u003d\u003d\u003cSelectedValues\u003e)));\u003c/encode\u003e\" , \"options\" : { } , \"refresh\" : false , \"default\" : true , \"disabled\" : false } ] } } ) ;\r\nPanel ( 0 ) | RetrievePanelEvents ( ) ;\r\nPanel ( 0 ) | SetPanelView ( \"visualization\" , \"\u003cencode\u003e{\"type\":\"echarts\"}\u003c/encode\u003e\" ) ;\r\nPanel ( 0 ) | SetPanelView ( \"pipeline\" , \"\u003cencode\u003e{\"app_id\":\"3b3e4a3b-d382-4e98-9950-9b4e8b308c1c\"}\u003c/encode\u003e\" ) ;\r\nDatabase ( database \u003d [ \"3b3e4a3b-d382-4e98-9950-9b4e8b308c1c\" ] ) | Query ( \"\u003cencode\u003eSELECT server_ip as \u0027Source\u0027,remote_ip as \u0027Target\u0027,connectionDirection as \u0027ConnectionDirection\u0027,port_used as \u0027SourcePort\u0027,remote_port as \u0027RemotePort\u0027,business_application as \u0027SourceBA\u0027,\r\nremote_business_application as \u0027TargetBA\u0027,protocol as \u0027Protocol\u0027,subnet as \u0027Subnet\u0027,environment as\u0027Environment\u0027,location as \u0027Location\u0027 FROM atadata_db.affinityview where connectionDirection\u003d \"Outbound\" or connectionDirection\u003d\"Internal\"\r\nunion\r\nSELECT remote_ip as \u0027Source\u0027,server_ip as \u0027Target\u0027,connectionDirection as \u0027ConnectionDirection\u0027,remote_port as \u0027SourcePort\u0027,port_used as \u0027RemotePort\u0027,remote_business_application as \u0027SourceBA\u0027,\r\nbusiness_application as \u0027TargetBA\u0027,protocol as \u0027Protocol\u0027,subnet as \u0027Subnet\u0027,environment as\u0027Environment\u0027,location as \u0027Location\u0027 FROM atadata_db.affinityview where connectionDirection\u003d \"Inbound\"\u003c/encode\u003e\" ) | Import ( frame \u003d [ CreateFrame ( frameType \u003d [ R ] , override \u003d [ true ] ) .as ( [ \"AFFINITYGRAPHFRAME\" ] ) ] ) ;\r\nAFFINITYGRAPHFRAME | SplitUnpivot ( columns \u003d [ \"SourcePort\" ] , delimiter \u003d [ \";\" ] ) ;\r\nAFFINITYGRAPHFRAME | SplitUnpivot ( columns \u003d [ \"RemotePort\" ] , delimiter \u003d [ \";\" ] ) ;\r\nAFFINITYGRAPHFRAME | ReplaceColumnValue ( column \u003d [ \"SourceBA\" ] , value \u003d [ \"\" ] , newValue \u003d [ \"Unknown\" ] ) ;\r\nAFFINITYGRAPHFRAME | UpdateRowValues ( SourceBA , \"Unknown\" , Filter ( SourceBA \u003d\u003d \"null\" ) ) ;\r\nAFFINITYGRAPHFRAME | ReplaceColumnValue ( column \u003d [ \"TargetBA\" ] , value \u003d [ \"\" ] , newValue \u003d [ \"Unknown\" ] ) ;\r\nAFFINITYGRAPHFRAME | UpdateRowValues ( TargetBA , \"Unknown\" , Filter ( TargetBA \u003d\u003d \"null\" ) ) ;\r\nAFFINITYGRAPHFRAME | ReplaceColumnValue ( column \u003d [ \"Subnet\" ] , value \u003d [ \"\" ] , newValue \u003d [ \"Unknown\" ] ) ;\r\nAFFINITYGRAPHFRAME | UpdateRowValues ( Subnet , \"Unknown\" , Filter ( Subnet \u003d\u003d \"null\" ) ) ;\r\nAFFINITYGRAPHFRAME | ReplaceColumnValue ( column \u003d [ \"Location\" ] , value \u003d [ \"\" ] , newValue \u003d [ \"Unknown\" ] ) ;\r\nAFFINITYGRAPHFRAME | UpdateRowValues ( Environment , \"Unknown\" , Filter ( Environment \u003d\u003d \"null\" ) ) ;\r\nPanel ( 0 ) | SetPanelView ( \"visualization\" , \"\u003cencode\u003e{\"type\":\"standard\"}\u003c/encode\u003e\" ) ;\r\nFrame ( frame \u003d [ AFFINITYGRAPHFRAME ] ) | Select ( Source , Target ) .as ( [ source , target ] ) | With ( Panel ( 0 ) ) | Format ( type \u003d [ \u0027graph\u0027 ] , options \u003d [ { \"connections\" : \"source.target;\" , \"alias\" : \"source.source;target.source\" , \"color\" : \"FF0000\" } ] ) | TaskOptions ( { \"0\" : { \"layout\" : \"Graph\" , \"alignment\" : { \"start\" : [ \"source\" ] , \"end\" : [ \"target\" ] , \"facet\" : [ ] } } } ) | Collect ( 2000 ) ;\r\nPanel ( 0 ) | RetrievePanelOrnaments ( \"tools.shared.displayValues\" ) ;\r\nAddPanel ( 1 ) ;\r\nPanel ( 1 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"COLLAPSIBLE\" , \"opacity\" : 100 , \"subType\" : \"\" } } ] ) ;\r\nPanel ( 1 ) | SetPanelView ( \"DashboardFilter\" , \"\u003cencode\u003e{\"autoRun\":true,\"frame\":\"AFFINITYGRAPHFRAME\"}\u003c/encode\u003e\" ) ;\r\nPanel ( 1 ) | AddPanelOrnaments ( { \"dashboardFilter\" : { \"singleSelect\" : \"Multi Select\" , \"viewType\" : \"List\" , \"instances\" : [ \"Source\" ] } } ) | RetrievePanelOrnaments ( \"dashboardFilter\" ) ;\r\nAddPanel ( 2 ) ;\r\nPanel ( 2 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"STANDARD\" , \"subType\" : \"UNFILTER\" , \"opacity\" : 100 , \"labelOverride\" : true , \"panelLabel\" : \"Unfilter Sheet\" , \"zIndex\" : 4 } } ] ) ;\r\nPanel ( 2 ) | SetPanelView ( \"unfilter-sheet\" ) ;\r\nAddPanel ( 3 ) ;\r\nPanel ( 3 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"COLLAPSIBLE\" , \"opacity\" : 100 , \"subType\" : \"\" } } ] ) ;\r\nPanel ( 3 ) | SetPanelView ( \"DashboardFilter\" , \"\u003cencode\u003e{\"autoRun\":true,\"frame\":\"AFFINITYGRAPHFRAME\"}\u003c/encode\u003e\" ) ;\r\nPanel ( 3 ) | AddPanelOrnaments ( { \"dashboardFilter\" : { \"singleSelect\" : \"Multi Select\" , \"viewType\" : \"List\" , \"instances\" : [ \"Target\" ] } } ) | RetrievePanelOrnaments ( \"dashboardFilter\" ) ;\r\nAddPanel ( 4 ) ;\r\nPanel ( 4 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"COLLAPSIBLE\" , \"opacity\" : 100 , \"subType\" : \"\" } } ] ) ;\r\nPanel ( 4 ) | SetPanelView ( \"DashboardFilter\" , \"\u003cencode\u003e{\"autoRun\":true,\"frame\":\"AFFINITYGRAPHFRAME\"}\u003c/encode\u003e\" ) ;\r\nPanel ( 4 ) | AddPanelOrnaments ( { \"dashboardFilter\" : { \"singleSelect\" : \"Multi Select\" , \"viewType\" : \"List\" , \"instances\" : [ \"SourcePort\" ] } } ) | RetrievePanelOrnaments ( \"dashboardFilter\" ) ;\r\nAddPanel ( 5 ) ;\r\nPanel ( 5 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"COLLAPSIBLE\" , \"opacity\" : 100 , \"subType\" : \"\" } } ] ) ;\r\nPanel ( 5 ) | SetPanelView ( \"DashboardFilter\" , \"\u003cencode\u003e{\"autoRun\":true,\"frame\":\"AFFINITYGRAPHFRAME\"}\u003c/encode\u003e\" ) ;\r\nPanel ( 5 ) | AddPanelOrnaments ( { \"dashboardFilter\" : { \"singleSelect\" : \"Multi Select\" , \"viewType\" : \"List\" , \"instances\" : [ \"RemotePort\" ] } } ) | RetrievePanelOrnaments ( \"dashboardFilter\" ) ;\r\nAddPanel ( 6 ) ;\r\nPanel ( 6 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"COLLAPSIBLE\" , \"opacity\" : 100 , \"subType\" : \"\" } } ] ) ;\r\nPanel ( 6 ) | SetPanelView ( \"DashboardFilter\" , \"\u003cencode\u003e{\"autoRun\":true,\"frame\":\"AFFINITYGRAPHFRAME\"}\u003c/encode\u003e\" ) ;\r\nPanel ( 6 ) | AddPanelOrnaments ( { \"dashboardFilter\" : { \"singleSelect\" : \"Multi Select\" , \"viewType\" : \"List\" , \"instances\" : [ \"Protocol\" ] } } ) | RetrievePanelOrnaments ( \"dashboardFilter\" ) ;\r\nAddPanel ( 7 ) ;\r\nPanel ( 7 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"COLLAPSIBLE\" , \"opacity\" : 100 , \"subType\" : \"\" } } ] ) ;\r\nPanel ( 7 ) | SetPanelView ( \"DashboardFilter\" , \"\u003cencode\u003e{\"autoRun\":true,\"frame\":\"AFFINITYGRAPHFRAME\"}\u003c/encode\u003e\" ) ;\r\nPanel ( 7 ) | AddPanelOrnaments ( { \"dashboardFilter\" : { \"singleSelect\" : \"Multi Select\" , \"viewType\" : \"List\" , \"instances\" : [ \"Location\" ] } } ) | RetrievePanelOrnaments ( \"dashboardFilter\" ) ;\r\nAddPanel ( 8 ) ;\r\nPanel ( 8 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"COLLAPSIBLE\" , \"opacity\" : 100 , \"subType\" : \"\" } } ] ) ;\r\nPanel ( 8 ) | SetPanelView ( \"DashboardFilter\" , \"\u003cencode\u003e{\"autoRun\":true,\"frame\":\"AFFINITYGRAPHFRAME\"}\u003c/encode\u003e\" ) ;\r\nPanel ( 8 ) | AddPanelOrnaments ( { \"dashboardFilter\" : { \"singleSelect\" : \"Multi Select\" , \"viewType\" : \"List\" , \"instances\" : [ \"SourceBA\" ] } } ) | RetrievePanelOrnaments ( \"dashboardFilter\" ) ;\r\nAddPanel ( 9 ) ;\r\nPanel ( 9 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"COLLAPSIBLE\" , \"opacity\" : 100 , \"subType\" : \"\" } } ] ) ;\r\nPanel ( 9 ) | SetPanelView ( \"DashboardFilter\" , \"\u003cencode\u003e{\"autoRun\":true,\"frame\":\"AFFINITYGRAPHFRAME\"}\u003c/encode\u003e\" ) ;\r\nPanel ( 9 ) | AddPanelOrnaments ( { \"dashboardFilter\" : { \"singleSelect\" : \"Multi Select\" , \"viewType\" : \"List\" , \"instances\" : [ \"TargetBA\" ] } } ) | RetrievePanelOrnaments ( \"dashboardFilter\" ) ;\r\nAddPanel ( 10 ) ;\r\nPanel ( 10 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"COLLAPSIBLE\" , \"opacity\" : 100 , \"subType\" : \"\" } } ] ) ;\r\nPanel ( 10 ) | SetPanelView ( \"DashboardFilter\" , \"\u003cencode\u003e{\"autoRun\":true,\"frame\":\"AFFINITYGRAPHFRAME\"}\u003c/encode\u003e\" ) ;\r\nPanel ( 10 ) | AddPanelOrnaments ( { \"dashboardFilter\" : { \"singleSelect\" : \"Multi Select\" , \"viewType\" : \"List\" , \"instances\" : [ \"Subnet\" ] } } ) | RetrievePanelOrnaments ( \"dashboardFilter\" ) ;\r\nAddPanel ( 11 ) ;\r\nPanel ( 11 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"COLLAPSIBLE\" , \"opacity\" : 100 , \"subType\" : \"\" } } ] ) ;\r\nPanel ( 11 ) | SetPanelView ( \"DashboardFilter\" , \"\u003cencode\u003e{\"autoRun\":true,\"frame\":\"AFFINITYGRAPHFRAME\"}\u003c/encode\u003e\" ) ;\r\nPanel ( 11 ) | AddPanelOrnaments ( { \"dashboardFilter\" : { \"singleSelect\" : \"Multi Select\" , \"viewType\" : \"List\" , \"instances\" : [ \"Environment\" ] } } ) | RetrievePanelOrnaments ( \"dashboardFilter\" ) ;\r\nDatabase ( database \u003d [ \"3b3e4a3b-d382-4e98-9950-9b4e8b308c1c\" ] ) | Query ( \"\u003cencode\u003eselect distinct server_ip as \u0027IPs\u0027 from affinityview where connectionDirection !\u003d \"Unknown\"\u003c/encode\u003e\" ) | Import ( frame \u003d [ CreateFrame ( frameType \u003d [ R ] , override \u003d [ true ] ) .as ( [ \"ServerListFrame\" ] ) ] ) ;\r\nAddPanel ( 15 ) ;\r\nPanel ( 15 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"STANDARD\" , \"opacity\" : 100 } } ] ) ;\r\nPanel ( 15 ) | AddPanelEvents ( { \"onSingleClick\" : { \"Unfilter\" : [ { \"panel\" : \"\" , \"query\" : \"\u003cencode\u003e(\u003cFrame\u003e | UnfilterFrame(\u003cSelectedColumn\u003e));\u003c/encode\u003e\" , \"options\" : { } , \"refresh\" : false , \"default\" : true , \"disabledVisuals\" : [ \"Grid\" , \"Sunburst\" ] , \"disabled\" : false } ] } , \"onBrush\" : { \"Filter\" : [ { \"panel\" : \"\" , \"query\" : \"\u003cencode\u003eif((IsEmpty(\u003cSelectedValues\u003e)),(\u003cFrame\u003e | UnfilterFrame(\u003cSelectedColumn\u003e)), (\u003cFrame\u003e | SetFrameFilter(\u003cSelectedColumn\u003e\u003d\u003d\u003cSelectedValues\u003e)));\u003c/encode\u003e\" , \"options\" : { } , \"refresh\" : false , \"default\" : true , \"disabled\" : false } ] } } ) ;\r\nPanel ( 15 ) | RetrievePanelEvents ( ) ;\r\n(Pixel) Panel ( 15 ) | AddPanelEvents ( { \"onSingleClick\" : { \"Server\" : [ { \"panel\" : \"0\" , \"query\" : \"\u003cencode\u003eAFFINITYGRAPHFRAME | SetFrameFilter(Source\u003d\u003d\u003cSelectedValues\u003e OR Target\u003d\u003d\u003cSelectedValues\u003e);\u003c/encode\u003e\" , \"options\" : { } , \"refresh\" : true , \"disabledVisuals\" : [ \"Sunburst\" ] } ] } } ) ;\r\nPanel ( 15 ) | SetPanelView ( \"visualization\" , \"\u003cencode\u003e{\"type\":\"echarts\"}\u003c/encode\u003e\" ) ;\r\nFrame ( frame \u003d [ ServerListFrame ] ) | Select ( IPs ) .as ( [ IPs ] ) | With ( Panel ( 15 ) ) | Format ( type \u003d [ \u0027table\u0027 ] ) | TaskOptions ( { \"15\" : { \"layout\" : \"Grid\" , \"alignment\" : { \"label\" : [ \"Source\" ] } } } ) | Collect ( 2000 ) ;\r\nPanel ( 0 ) | SetPanelLabel ( \"Affinity Network Graph\" );\r\nPanel ( 1 ) | SetPanelLabel ( \"Filter Outbound Connections\" );\r\nPanel ( 3 ) | SetPanelLabel ( \"Filter Inbound Connections\" );\r\nPanel ( 4 ) | SetPanelLabel ( \"Filter Source Port\" );\r\nPanel ( 5 ) | SetPanelLabel ( \"Filter Target Port\" );\r\nPanel ( 6 ) | SetPanelLabel ( \"Filter Protocol\" );\r\nPanel ( 7 ) | SetPanelLabel ( \"Filter Location\" );\r\nPanel ( 8 ) | SetPanelLabel ( \"Filter Source Business Application\" );\r\nPanel ( 9 ) | SetPanelLabel ( \"Filter Target Business Application\" );\r\nPanel ( 10 ) | SetPanelLabel ( \"Filter Subnet\" );\r\nPanel ( 11 ) | SetPanelLabel ( \"Filter Environment\" );\r\nPanel ( 15 ) | SetPanelLabel ( \"IPs\" );\r\nPanel ( 15 ) | SetPanelPosition ( { \"top\" : 15 , \"left\" : 87 , \"width\" :12 , \"height\" : 85 } ) ;\r\nPanel ( 0 ) | SetPanelPosition ( { \"top\" : 15 , \"left\" : 0.2 , \"width\" : 86.5 , \"height\" : 85 } ) ;\r\n\r\n;",
    "AddPanel ( 0 ) ;",
    "Panel ( 0 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"STANDARD\" , \"opacity\" : 100 } } ] ) ;",
    "Panel ( 0 ) | AddPanelEvents ( { \"onSingleClick\" : { \"Unfilter\" : [ { \"panel\" : \"\" , \"query\" : \"\u003cencode\u003e(\u003cFrame\u003e | UnfilterFrame(\u003cSelectedColumn\u003e));\u003c/encode\u003e\" , \"options\" : { } , \"refresh\" : false , \"default\" : true , \"disabledVisuals\" : [ \"Grid\" , \"Sunburst\" ] , \"disabled\" : false } ] } , \"onBrush\" : { \"Filter\" : [ { \"panel\" : \"\" , \"query\" : \"\u003cencode\u003eif((IsEmpty(\u003cSelectedValues\u003e)),(\u003cFrame\u003e | UnfilterFrame(\u003cSelectedColumn\u003e)), (\u003cFrame\u003e | SetFrameFilter(\u003cSelectedColumn\u003e\u003d\u003d\u003cSelectedValues\u003e)));\u003c/encode\u003e\" , \"options\" : { } , \"refresh\" : false , \"default\" : true , \"disabled\" : false } ] } } ) ;",
    "Panel ( 0 ) | RetrievePanelEvents ( ) ;",
    "Panel ( 0 ) | SetPanelView ( \"visualization\" , \"\u003cencode\u003e{\"type\":\"echarts\"}\u003c/encode\u003e\" ) ;",
    "Panel ( 0 ) | SetPanelView ( \"pipeline\" , \"\u003cencode\u003e{\"app_id\":\"3b3e4a3b-d382-4e98-9950-9b4e8b308c1c\"}\u003c/encode\u003e\" ) ;",
    "AddPanel ( 0 ) ;",
    "Panel ( 0 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"STANDARD\" , \"opacity\" : 100 } } ] ) ;",
    "Panel ( 0 ) | AddPanelEvents ( { \"onSingleClick\" : { \"Unfilter\" : [ { \"panel\" : \"\" , \"query\" : \"\u003cencode\u003e(\u003cFrame\u003e | UnfilterFrame(\u003cSelectedColumn\u003e));\u003c/encode\u003e\" , \"options\" : { } , \"refresh\" : false , \"default\" : true , \"disabledVisuals\" : [ \"Grid\" , \"Sunburst\" ] , \"disabled\" : false } ] } , \"onBrush\" : { \"Filter\" : [ { \"panel\" : \"\" , \"query\" : \"\u003cencode\u003eif((IsEmpty(\u003cSelectedValues\u003e)),(\u003cFrame\u003e | UnfilterFrame(\u003cSelectedColumn\u003e)), (\u003cFrame\u003e | SetFrameFilter(\u003cSelectedColumn\u003e\u003d\u003d\u003cSelectedValues\u003e)));\u003c/encode\u003e\" , \"options\" : { } , \"refresh\" : false , \"default\" : true , \"disabled\" : false } ] } } ) ;",
    "Panel ( 0 ) | RetrievePanelEvents ( ) ;",
    "Panel ( 0 ) | SetPanelView ( \"visualization\" , \"\u003cencode\u003e{\"type\":\"echarts\"}\u003c/encode\u003e\" ) ;",
    "Panel ( 0 ) | SetPanelView ( \"pipeline\" , \"\u003cencode\u003e{\"app_id\":\"3b3e4a3b-d382-4e98-9950-9b4e8b308c1c\"}\u003c/encode\u003e\" ) ;",
    "Database ( database \u003d [ \"3b3e4a3b-d382-4e98-9950-9b4e8b308c1c\" ] ) | Query ( \"\u003cencode\u003eSELECT server_ip as \u0027Source\u0027,remote_ip as \u0027Target\u0027,connectionDirection as \u0027ConnectionDirection\u0027,port_used as \u0027SourcePort\u0027,remote_port as \u0027RemotePort\u0027,business_application as \u0027SourceBA\u0027,\r\nremote_business_application as \u0027TargetBA\u0027,protocol as \u0027Protocol\u0027,subnet as \u0027Subnet\u0027,environment as\u0027Environment\u0027,location as \u0027Location\u0027 FROM atadata_db.affinityview where connectionDirection\u003d \"Outbound\" or connectionDirection\u003d\"Internal\"\r\nunion\r\nSELECT remote_ip as \u0027Source\u0027,server_ip as \u0027Target\u0027,connectionDirection as \u0027ConnectionDirection\u0027,remote_port as \u0027SourcePort\u0027,port_used as \u0027RemotePort\u0027,remote_business_application as \u0027SourceBA\u0027,\r\nbusiness_application as \u0027TargetBA\u0027,protocol as \u0027Protocol\u0027,subnet as \u0027Subnet\u0027,environment as\u0027Environment\u0027,location as \u0027Location\u0027 FROM atadata_db.affinityview where connectionDirection\u003d \"Inbound\"\u003c/encode\u003e\" ) | Import ( frame \u003d [ CreateFrame ( frameType \u003d [ R ] , override \u003d [ true ] ) .as ( [ \"AFFINITYGRAPHFRAME\" ] ) ] ) ;",
    "AFFINITYGRAPHFRAME | SplitUnpivot ( columns \u003d [ \"SourcePort\" ] , delimiter \u003d [ \";\" ] ) ;",
    "AFFINITYGRAPHFRAME | SplitUnpivot ( columns \u003d [ \"RemotePort\" ] , delimiter \u003d [ \";\" ] ) ;",
    "AFFINITYGRAPHFRAME | ReplaceColumnValue ( column \u003d [ \"SourceBA\" ] , value \u003d [ \"\" ] , newValue \u003d [ \"Unknown\" ] ) ;",
    "AFFINITYGRAPHFRAME | UpdateRowValues ( SourceBA , \"Unknown\" , Filter ( SourceBA \u003d\u003d \"null\" ) ) ;",
    "AFFINITYGRAPHFRAME | ReplaceColumnValue ( column \u003d [ \"TargetBA\" ] , value \u003d [ \"\" ] , newValue \u003d [ \"Unknown\" ] ) ;",
    "AFFINITYGRAPHFRAME | UpdateRowValues ( TargetBA , \"Unknown\" , Filter ( TargetBA \u003d\u003d \"null\" ) ) ;",
    "AFFINITYGRAPHFRAME | ReplaceColumnValue ( column \u003d [ \"Subnet\" ] , value \u003d [ \"\" ] , newValue \u003d [ \"Unknown\" ] ) ;",
    "AFFINITYGRAPHFRAME | UpdateRowValues ( Subnet , \"Unknown\" , Filter ( Subnet \u003d\u003d \"null\" ) ) ;",
    "AFFINITYGRAPHFRAME | ReplaceColumnValue ( column \u003d [ \"Location\" ] , value \u003d [ \"\" ] , newValue \u003d [ \"Unknown\" ] ) ;",
    "AFFINITYGRAPHFRAME | UpdateRowValues ( Environment , \"Unknown\" , Filter ( Environment \u003d\u003d \"null\" ) ) ;",
    "Panel ( 0 ) | SetPanelView ( \"visualization\" , \"\u003cencode\u003e{\"type\":\"standard\"}\u003c/encode\u003e\" ) ;",
    "Frame ( frame \u003d [ AFFINITYGRAPHFRAME ] ) | Select ( Source , Target ) .as ( [ source , target ] ) | With ( Panel ( 0 ) ) | Format ( type \u003d [ \u0027graph\u0027 ] , options \u003d [ { \"connections\" : \"source.target;\" , \"alias\" : \"source.source;target.source\" , \"color\" : \"FF0000\" } ] ) | TaskOptions ( { \"0\" : { \"layout\" : \"Graph\" , \"alignment\" : { \"start\" : [ \"source\" ] , \"end\" : [ \"target\" ] , \"facet\" : [ ] } } } ) | Collect ( 2000 ) ;",
    "Panel ( 0 ) | RetrievePanelOrnaments ( \"tools.shared.displayValues\" ) ;",
    "AddPanel ( 1 ) ;",
    "Panel ( 1 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"COLLAPSIBLE\" , \"opacity\" : 100 , \"subType\" : \"\" } } ] ) ;",
    "Panel ( 1 ) | SetPanelView ( \"DashboardFilter\" , \"\u003cencode\u003e{\"autoRun\":true,\"frame\":\"AFFINITYGRAPHFRAME\"}\u003c/encode\u003e\" ) ;",
    "Panel ( 1 ) | AddPanelOrnaments ( { \"dashboardFilter\" : { \"singleSelect\" : \"Multi Select\" , \"viewType\" : \"List\" , \"instances\" : [ \"Source\" ] } } ) | RetrievePanelOrnaments ( \"dashboardFilter\" ) ;",
    "AddPanel ( 2 ) ;",
    "Panel ( 2 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"STANDARD\" , \"subType\" : \"UNFILTER\" , \"opacity\" : 100 , \"labelOverride\" : true , \"panelLabel\" : \"Unfilter Sheet\" , \"zIndex\" : 4 } } ] ) ;",
    "Panel ( 2 ) | SetPanelView ( \"unfilter-sheet\" ) ;",
    "AddPanel ( 3 ) ;",
    "Panel ( 3 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"COLLAPSIBLE\" , \"opacity\" : 100 , \"subType\" : \"\" } } ] ) ;",
    "Panel ( 3 ) | SetPanelView ( \"DashboardFilter\" , \"\u003cencode\u003e{\"autoRun\":true,\"frame\":\"AFFINITYGRAPHFRAME\"}\u003c/encode\u003e\" ) ;",
    "Panel ( 3 ) | AddPanelOrnaments ( { \"dashboardFilter\" : { \"singleSelect\" : \"Multi Select\" , \"viewType\" : \"List\" , \"instances\" : [ \"Target\" ] } } ) | RetrievePanelOrnaments ( \"dashboardFilter\" ) ;",
    "AddPanel ( 4 ) ;",
    "Panel ( 4 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"COLLAPSIBLE\" , \"opacity\" : 100 , \"subType\" : \"\" } } ] ) ;",
    "Panel ( 4 ) | SetPanelView ( \"DashboardFilter\" , \"\u003cencode\u003e{\"autoRun\":true,\"frame\":\"AFFINITYGRAPHFRAME\"}\u003c/encode\u003e\" ) ;",
    "Panel ( 4 ) | AddPanelOrnaments ( { \"dashboardFilter\" : { \"singleSelect\" : \"Multi Select\" , \"viewType\" : \"List\" , \"instances\" : [ \"SourcePort\" ] } } ) | RetrievePanelOrnaments ( \"dashboardFilter\" ) ;",
    "AddPanel ( 5 ) ;",
    "Panel ( 5 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"COLLAPSIBLE\" , \"opacity\" : 100 , \"subType\" : \"\" } } ] ) ;",
    "Panel ( 5 ) | SetPanelView ( \"DashboardFilter\" , \"\u003cencode\u003e{\"autoRun\":true,\"frame\":\"AFFINITYGRAPHFRAME\"}\u003c/encode\u003e\" ) ;",
    "Panel ( 5 ) | AddPanelOrnaments ( { \"dashboardFilter\" : { \"singleSelect\" : \"Multi Select\" , \"viewType\" : \"List\" , \"instances\" : [ \"RemotePort\" ] } } ) | RetrievePanelOrnaments ( \"dashboardFilter\" ) ;",
    "AddPanel ( 6 ) ;",
    "Panel ( 6 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"COLLAPSIBLE\" , \"opacity\" : 100 , \"subType\" : \"\" } } ] ) ;",
    "Panel ( 6 ) | SetPanelView ( \"DashboardFilter\" , \"\u003cencode\u003e{\"autoRun\":true,\"frame\":\"AFFINITYGRAPHFRAME\"}\u003c/encode\u003e\" ) ;",
    "Panel ( 6 ) | AddPanelOrnaments ( { \"dashboardFilter\" : { \"singleSelect\" : \"Multi Select\" , \"viewType\" : \"List\" , \"instances\" : [ \"Protocol\" ] } } ) | RetrievePanelOrnaments ( \"dashboardFilter\" ) ;",
    "AddPanel ( 7 ) ;",
    "Panel ( 7 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"COLLAPSIBLE\" , \"opacity\" : 100 , \"subType\" : \"\" } } ] ) ;",
    "Panel ( 7 ) | SetPanelView ( \"DashboardFilter\" , \"\u003cencode\u003e{\"autoRun\":true,\"frame\":\"AFFINITYGRAPHFRAME\"}\u003c/encode\u003e\" ) ;",
    "Panel ( 7 ) | AddPanelOrnaments ( { \"dashboardFilter\" : { \"singleSelect\" : \"Multi Select\" , \"viewType\" : \"List\" , \"instances\" : [ \"Location\" ] } } ) | RetrievePanelOrnaments ( \"dashboardFilter\" ) ;",
    "AddPanel ( 8 ) ;",
    "Panel ( 8 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"COLLAPSIBLE\" , \"opacity\" : 100 , \"subType\" : \"\" } } ] ) ;",
    "Panel ( 8 ) | SetPanelView ( \"DashboardFilter\" , \"\u003cencode\u003e{\"autoRun\":true,\"frame\":\"AFFINITYGRAPHFRAME\"}\u003c/encode\u003e\" ) ;",
    "Panel ( 8 ) | AddPanelOrnaments ( { \"dashboardFilter\" : { \"singleSelect\" : \"Multi Select\" , \"viewType\" : \"List\" , \"instances\" : [ \"SourceBA\" ] } } ) | RetrievePanelOrnaments ( \"dashboardFilter\" ) ;",
    "AddPanel ( 9 ) ;",
    "Panel ( 9 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"COLLAPSIBLE\" , \"opacity\" : 100 , \"subType\" : \"\" } } ] ) ;",
    "Panel ( 9 ) | SetPanelView ( \"DashboardFilter\" , \"\u003cencode\u003e{\"autoRun\":true,\"frame\":\"AFFINITYGRAPHFRAME\"}\u003c/encode\u003e\" ) ;",
    "Panel ( 9 ) | AddPanelOrnaments ( { \"dashboardFilter\" : { \"singleSelect\" : \"Multi Select\" , \"viewType\" : \"List\" , \"instances\" : [ \"TargetBA\" ] } } ) | RetrievePanelOrnaments ( \"dashboardFilter\" ) ;",
    "AddPanel ( 10 ) ;",
    "Panel ( 10 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"COLLAPSIBLE\" , \"opacity\" : 100 , \"subType\" : \"\" } } ] ) ;",
    "Panel ( 10 ) | SetPanelView ( \"DashboardFilter\" , \"\u003cencode\u003e{\"autoRun\":true,\"frame\":\"AFFINITYGRAPHFRAME\"}\u003c/encode\u003e\" ) ;",
    "Panel ( 10 ) | AddPanelOrnaments ( { \"dashboardFilter\" : { \"singleSelect\" : \"Multi Select\" , \"viewType\" : \"List\" , \"instances\" : [ \"Subnet\" ] } } ) | RetrievePanelOrnaments ( \"dashboardFilter\" ) ;",
    "AddPanel ( 11 ) ;",
    "Panel ( 11 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"COLLAPSIBLE\" , \"opacity\" : 100 , \"subType\" : \"\" } } ] ) ;",
    "Panel ( 11 ) | SetPanelView ( \"DashboardFilter\" , \"\u003cencode\u003e{\"autoRun\":true,\"frame\":\"AFFINITYGRAPHFRAME\"}\u003c/encode\u003e\" ) ;",
    "Panel ( 11 ) | AddPanelOrnaments ( { \"dashboardFilter\" : { \"singleSelect\" : \"Multi Select\" , \"viewType\" : \"List\" , \"instances\" : [ \"Environment\" ] } } ) | RetrievePanelOrnaments ( \"dashboardFilter\" ) ;",
    "Database ( database \u003d [ \"3b3e4a3b-d382-4e98-9950-9b4e8b308c1c\" ] ) | Query ( \"\u003cencode\u003eselect distinct server_ip as \u0027IPs\u0027 from affinityview where connectionDirection !\u003d \"Unknown\"\u003c/encode\u003e\" ) | Import ( frame \u003d [ CreateFrame ( frameType \u003d [ R ] , override \u003d [ true ] ) .as ( [ \"ServerListFrame\" ] ) ] ) ;",
    "AddPanel ( 15 ) ;",
    "Panel ( 15 ) | AddPanelConfig ( config \u003d [ { \"config\" : { \"type\" : \"STANDARD\" , \"opacity\" : 100 } } ] ) ;",
    "Panel ( 15 ) | AddPanelEvents ( { \"onSingleClick\" : { \"Unfilter\" : [ { \"panel\" : \"\" , \"query\" : \"\u003cencode\u003e(\u003cFrame\u003e | UnfilterFrame(\u003cSelectedColumn\u003e));\u003c/encode\u003e\" , \"options\" : { } , \"refresh\" : false , \"default\" : true , \"disabledVisuals\" : [ \"Grid\" , \"Sunburst\" ] , \"disabled\" : false } ] } , \"onBrush\" : { \"Filter\" : [ { \"panel\" : \"\" , \"query\" : \"\u003cencode\u003eif((IsEmpty(\u003cSelectedValues\u003e)),(\u003cFrame\u003e | UnfilterFrame(\u003cSelectedColumn\u003e)), (\u003cFrame\u003e | SetFrameFilter(\u003cSelectedColumn\u003e\u003d\u003d\u003cSelectedValues\u003e)));\u003c/encode\u003e\" , \"options\" : { } , \"refresh\" : false , \"default\" : true , \"disabled\" : false } ] } } ) ;",
    "Panel ( 15 ) | RetrievePanelEvents ( ) ;",
    "Panel ( 15 ) | AddPanelEvents ( { \"onSingleClick\" : { \"Server\" : [ { \"panel\" : \"0\" , \"query\" : \"\u003cencode\u003eAFFINITYGRAPHFRAME | SetFrameFilter(Source\u003d\u003d\u003cSelectedValues\u003e OR Target\u003d\u003d\u003cSelectedValues\u003e);\u003c/encode\u003e\" , \"options\" : { } , \"refresh\" : true , \"disabledVisuals\" : [ \"Sunburst\" ] } ] } } ) ;",
    "Panel ( 15 ) | SetPanelView ( \"visualization\" , \"\u003cencode\u003e{\"type\":\"echarts\"}\u003c/encode\u003e\" ) ;",
    "Frame ( frame \u003d [ ServerListFrame ] ) | Select ( IPs ) .as ( [ IPs ] ) | With ( Panel ( 15 ) ) | Format ( type \u003d [ \u0027table\u0027 ] ) | TaskOptions ( { \"15\" : { \"layout\" : \"Grid\" , \"alignment\" : { \"label\" : [ \"Source\" ] } } } ) | Collect ( 2000 ) ;",
    "Panel ( 0 ) | SetPanelLabel ( \"Affinity Network Graph\" ) ;",
    "Panel ( 1 ) | SetPanelLabel ( \"Filter Outbound Connections\" ) ;",
    "Panel ( 3 ) | SetPanelLabel ( \"Filter Inbound Connections\" ) ;",
    "Panel ( 4 ) | SetPanelLabel ( \"Filter Source Port\" ) ;",
    "Panel ( 5 ) | SetPanelLabel ( \"Filter Target Port\" ) ;",
    "Panel ( 6 ) | SetPanelLabel ( \"Filter Protocol\" ) ;",
    "Panel ( 7 ) | SetPanelLabel ( \"Filter Location\" ) ;",
    "Panel ( 8 ) | SetPanelLabel ( \"Filter Source Business Application\" ) ;",
    "Panel ( 9 ) | SetPanelLabel ( \"Filter Target Business Application\" ) ;",
    "Panel ( 10 ) | SetPanelLabel ( \"Filter Subnet\" ) ;",
    "Panel ( 11 ) | SetPanelLabel ( \"Filter Environment\" ) ;",
    "Panel ( 15 ) | SetPanelLabel ( \"IPs\" ) ;",
    "Panel ( 15 ) | SetPanelPosition ( { \"top\" : 15 , \"left\" : 87 , \"width\" : 12 , \"height\" : 85 } ) ;",
    "Panel ( 0 ) | SetPanelPosition ( { \"top\" : 15 , \"left\" : 0 . 2 , \"width\" : 86 . 5 , \"height\" : 85 } ) ;"
  ],
  "description": "Currently used in Atasphere 2.0"
}